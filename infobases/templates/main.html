{% extends 'base.html' %}
{% load static %}

{% block style %} 
  {% comment %} css {% endcomment %}
  <link rel="stylesheet" type="text/css" href="{% static '/css/main.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static '/css/movie.css' %}">
  <script src="https://unpkg.com/embla-carousel/embla-carousel.umd.js"></script>
  <script src="https://unpkg.com/embla-carousel-autoplay/embla-carousel-autoplay.umd.js"></script>
{% endblock style %}

{% block content %}
  <article class="width">
    <section class="newsandweather__container">
      <div class="slideshow--container">
        <span>GeekNews</span>
        {% for key, value in news_dict.items %}
          <div class="mySlides fade">
            <a class="text" href="{{ key }}" target='_blank'>{{ value }}</a>
          </div>
        {% endfor %}
      </div>
      <div class="weather">
        <div class="weather--img" style="background-image: url('{{ icon }}');">
        </div>
        <div>
          <p>{{ weather }}</p>
        </div>
        <div>
          <p>í˜„ì¬ì˜¨ë„</p>
          <p>{{ temp }}Â°C</p>
        </div>
        <div>
          <p>ìµœê³ ì˜¨ë„</p>
          <p>{{ temp_max }}Â°C</p>
        </div>
        <div>
          <p>ìµœì €ì˜¨ë„</p>
          <p>{{ temp_min }}Â°C</p>
        </div>
        <div class = "weather--label__box">
        </div>
        <div>
          <p>ì²´ê°ì˜¨ë„</p>
          <p>{{ feels_like }}Â°C</p>
        </div>
        <div>
          <p>ìŠµë„</p>
          <p>{{ humidity }}%</p>
        </div>
        <div>
          <p>ë¯¸ì„¸ë¨¼ì§€</p>
          <p>{{ fine_dust }}</p>
        </div>
        <div>
          <p>ì´ˆë¯¸ì„¸ë¨¼ì§€</p>
          <p>{{ ultrafine_dust }}</p>
        </div>
        <form action="{% url 'infobases:main' %}" method="POST">
        {% csrf_token %}
          <div class="selectBox">
            <select name="city" class="select" id="city" onchange="this.form.submit()" style="height: 30px;">
              {% for city in cities %}
                <option value="{{ city.value }}" {% if selected_city == city.value %}selected{% endif %}>{{ city.name }}</option>
              {% endfor %}
            </select>
          </div>
        </form>
      </div>
    </section>
    <section class="container">
      <div>
        <p>ìœ íŠœë¸Œ ì¸ê¸° ê¸‰ìƒìŠ¹ Top 5</p>
        <iframe width="560" height="315" 
        src={{ youtube_trending_video_list }}
        title="YouTube video player" 
        frameborder="0" 
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
        allowfullscreen></iframe>
      </div>
      {% comment %} movie {% endcomment %}
      <div  class="embla">
        <div class="embla__container">
          {% for rank,movie in movies.items %}
            <div class="embla__slide">
              <div class="poster">
                <div class="rank">
                  <span>{{ rank }}</span>
                </div>
                <img src="{{ movie.0 }}" alt="" class="poster-img">
                <div class="movieChart_btn_wrap">
                  <a href="{{ movie.5 }}" class="movie-info-btn" >ìƒì„¸ë³´ê¸°</a>
                  <a href="{{ movie.6 }}" class="movie-ticketing-btn">ì˜ˆë§¤í•˜ê¸°</a>
                </div>
              </div>
              <div class="movie-txt">
                <div>
                  <a href="{{ movie.5 }}" class="movie-title">
                    <span class="movie-title">{{ movie.1 }}</span>
                  </a>
                </div>
                <div class="movie-info">
                  <div class="rating">
                    <img src="{{ movie.2 }}" alt="">
                    <p>{{ movie.3 }}</p>
                  </div>
                  <div>|</div>
                  <div class="ticketing">
                    <p>{{ movie.4 }}</p>
                  </div>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>

      <div>c</div>
      <div>d</div>
      <div>e</div>
      <div>f</div>
    </section> 
  </article>
{% comment %} javascript {% endcomment %}
<script src="{% static '/js/main.js' %}" type="text/javascript"></script>

{% comment %} movie {% endcomment %}
<script type="text/javascript">
  var emblaNode = document.querySelector(".embla");
  var options = { loop: false };
  var plugins = [EmblaCarouselAutoplay()]; // Plugins

  var embla = EmblaCarousel(emblaNode, options, plugins);

  var posters = document.querySelectorAll('.poster');

  posters.forEach(function(poster) {
    poster.addEventListener('mouseover', function() {
      var btnWrap = poster.querySelector('.movieChart_btn_wrap');
      btnWrap.style.display = 'block';
    });

    poster.addEventListener('mouseout', function() {
      var btnWrap = poster.querySelector('.movieChart_btn_wrap');
      btnWrap.style.display = 'none';
    });
  });
</script>


{% endblock content %}
{% block footer %}
  <footer>
    <div class="width">
      <div class="footer--div_1">
        <a href='https://github.com/sodamjeong' target='_blank' class="name">ì •ì†Œë‹´</a>
        <span>|</span>
        <a href='https://github.com/sotthang' target='_blank' class="name">ì†Œí˜„ì„­</a>
        <span>|</span>
        <a href='https://github.com/JiSuMun' target='_blank' class="name">ë¬¸ì§€ìˆ˜</a>
        <span>|</span>
        <a href='https://github.com/qloeo' target='_blank' class="name">ì •ë¯¸ì˜</a>
      </div>
      <div class="footer--div_2">
        <div>KDT í’€ìŠ¤íƒ 2ê¸° ë‹¬ë‹˜ë°˜ğŸŒ™</div>
        <div>Copyright 2023. All Rights Reserved.</div> 
      </div>
    </div>
  </footer>
{% endblock footer %}